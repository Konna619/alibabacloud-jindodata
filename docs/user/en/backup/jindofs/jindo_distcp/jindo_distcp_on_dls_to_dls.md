Migrate data between different buckets for which OSS-HDFS is enabled
Usage notes

- Make sure that the required environments are prepared and the related tools are downloaded. For more information, see [Jindo DistCp overview](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_overview.md).
- If issues occur when you migrate data between buckets for which OSS-HDFS is enabled, refer to FAQ about [Jindo DistCp to resolve the issues. You can also ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[create an issue](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ to provide feedback.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

[1. Copy data to OSS-HDFS](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[You can run the following command to copy data between different buckets: ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

- [If the source and destination buckets reside in the same region and can be accessed by using the same AccessKey pair, you can run the following command to migrate data:](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

[hadoop jar jindo-distcp-tool-${version}.jar --src oss://srcBucket.cn-xxx.oss-dls.aliyuncs.com/ --dest oss://destBucket.cn-xxx.oss-dls.aliyuncs.com/ --hadoopConf fs.oss.accessKeyId=yourkey --hadoopConf fs.oss.accessKeySecret=yoursecret --parallelism 10](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

| [Parameter](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [Description](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [Example](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |
| --- | --- | --- |
| [--src](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [The source path of the OSS-HDFS service. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [oss://srcBucket.cn-xxx.oss-dls.aliyuncs.com/](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |
| [--dest](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [The destination path of the OSS-HDFS service. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [oss://destBucket.cn-xxx.oss-dls.aliyuncs.com/](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |
| [--hadoopConf](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [The ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[AccessKey ID](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ and ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[AccessKey secret](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ that are used to access OSS-HDFS.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [* Specify an AccessKey ID that is used to access OSS-HDFS:--hadoopConf fs.oss.accessKeyId=yourkey* Specify an AccessKey secret that is used to access OSS-HDFS:--hadoopConf fs.oss.accessKeySecret=yoursecret](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |
| [--parallelism](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [The task parallelism. You can adjust the value of this parameter based on the cluster resources. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [10](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |

- [If the source and destination buckets reside in different regions or cannot be accessed by using the same AccessKey pair, you can run the following command to migrate data:](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

[hadoop jar jindo-distcp-tool-${version}.jar --src oss://srcbucket.oss-cn-xxx.aliyuncs.com/ --dest oss://destBucket.oss-cn-xxx.aliyuncs.com/ --hadoopConf fs.oss.bucket.srcbucket.accessKeyId=yourkey --hadoopConf fs.oss.bucket.srcbucket.accessKeySecret=yoursecret --hadoopConf --hadoopConf fs.oss.bucket.destBucket.accessKeyId=yourkey --hadoopConf fs.oss.bucket.destBucket.accessKeySecret=yoursecret --parallelism 10](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

| [Parameter](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [Description](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [Example](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |
| --- | --- | --- |
| [--hadoopConf](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [The ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[AccessKey IDs](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ and ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[AccessKey secrets](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ that are used to access the source and destination buckets.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) | [* Specify an AccessKey ID that is used to access Bucket XXX:--hadoopConf fs.oss.bucket.XXX.accessKeyId=yourkey* Specify an AccessKey secret that is used to access Bucket XXX:--hadoopConf fs.oss.bucket.XXX.accessKeySecret=yoursecret](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md) |

[2. Copy incremental files](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[If a Jindo DistCp job is interrupted, and some files fail to be copied to the destination directory, you can use the --update parameter to copy these files. If specific files are added to the source directory, you can also use the --update parameter to copy the incremental files to the destination directory.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[ ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[hadoop jar jindo-distcp-tool-${version}.jar --src oss://srcBucket.oss-cn-xxx.aliyuncs.com/ --dest oss://destBucket.oss-cn-xxx.aliyuncs.com/ --hadoopConf fs.oss.accessKeyId=yourkey --hadoopConf fs.oss.accessKeySecret=yoursecret --update --parallelism 20](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[3. Specify a YARN queue and a bandwidth](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[You can run the following command to specify a YARN queue and a bandwidth for a Jindo DistCp job based on your business requirements:](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[hadoop jar jindo-distcp-tool-${version}.jar --src oss://srcBucket.oss-cn-xxx.aliyuncs.com/ --dest oss://destBucket.oss-cn-xxx.aliyuncs.com/ --hadoopConf fs.oss.accessKeyId=yourkey --hadoopConf fs.oss.accessKeySecret=yoursecret --hadoopConf mapreduce.job.queuename=yarnQueue --bandWidth 100 --parallelism 10](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

- [-- hadoopConf mapreduce.job.queuename=yarnQueue: the name of the YARN queue.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
- [-- bandWidth: the bandwidth of a single instance. Unit: MB.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

[4. Store data in password-free mode or by using an AccessKey pair](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[In most cases, you need to specify the AccessKey ID and AccessKey secret of OSS-HDFS in the corresponding parameters. JindoDistCp allows you to specify the AccessKey ID and AccessKey secret in the ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[core-site.xml](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ file of Hadoop. This way, you do not need to repeatedly specify the AccessKey ID and AccessKey secret. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[<configuration>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[<property>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[<name>fs.oss.accessKeyId</name>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[<value>xxx</value>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[</property>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

[<property>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[<name>fs.oss.accessKeySecret</name>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[<value>xxx</value>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[</property>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[</configuration>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[5. Configure the endpoint of OSS-HDFS](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[To access OSS-HDFS, you must configure an endpoint in the ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[cn-xxx.oss-dls.aliyuncs.com](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ format. The endpoint of OSS-HDFS is different from the endpoint that is used to access OSS. The endpoint that is used to access OSS is in the ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[oss-cn-xxx-internal.aliyuncs.com](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ format. JindoSDK accesses OSS-HDFS or OSS based on the endpoint that you configure. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[If you want to access OSS-HDFS, we recommend that you specify the access path in the ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[oss://<Bucket>.<Endpoint>/<Object>](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[ format.](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[Example: ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[oss://mydlsbucket.cn-shanghai.oss-dls.aliyuncs.com/Test](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[The preceding directory contains the endpoint of OSS-HDFS. JindoSDK accesses OSS-HDFS based on the endpoint in the directory. JindoSDK allows you to use other methods to configure the endpoint of OSS-HDFS. For more information, see ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[Configure an endpoint to access OSS-HDFS](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)[. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[6. Save metadata information](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[Use the preserveMeta parameter to allow metadata to be migrated when you migrate data. The metadata includes Owner, Group, Permission, Atime, Mtime, Replication, BlockSize, XAttrs, and ACL. ](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[hadoop jar jindo-distcp-tool-${version}.jar --src oss://srcBucket.oss-cn-xxx.aliyuncs.com/ --dest oss://destBucket.oss-cn-xxx.aliyuncs.com/ --preserveMeta](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[7. Other features](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)
[For information about how to use Jindo DistCp to migrate data, refer to the following topic:](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

- [Usage notes of data migration by using Jindo DistCp](https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/4.x/4.6.x/4.6.12/jindofs/jindo_distcp/jindo_distcp_QA.md)

